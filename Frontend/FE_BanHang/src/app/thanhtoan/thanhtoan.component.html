<div style="margin-top: 144px; padding: 40px 0;">
  <div class="container">
  <div class="thanhtoan__container" style="display: flex;">
    <div class="thanhtoan" style="width: 60%;  padding: 10px 20px;" *ngIf="account">
      <h5>Thông tin giao hàng</h5>
      <div class="thongtin" style="display: flex;padding: 20px 0;">
        <div class="cotanh">
          <img [src]="account.duongDanAnh">
        </div>
        <div class="cotthongtin">
          <div style="margin-top: 20px;">{{account.tenHienThi}}</div>
          <div><a style="font-size: 14px;">Đăng xuất</a></div>
        </div>
      </div>
      <div class="hang">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [ngModel]="account.tenHienThi">
          <label for="float-input" class="labelFocus">Họ tên</label>
      </span>
      </div>
      <div class="hang">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [ngModel]="account.soDienThoai">
          <label for="float-input" class="labelFocus">Số điện thoại</label>
      </span>
      </div>
      <div class="hang">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [ngModel]="account.email">
          <label for="float-input" class="labelFocus">Email</label>
      </span>
      </div>
      <div style="display: flex; margin-bottom: 20px;">
        <p-inputSwitch [(ngModel)]="isDungDiaChiKhac" name="diachikhac"></p-inputSwitch>
        <div  style="padding: 5px; margin-left: 10px;">Sử dụng địa chỉ khác</div>
      </div>

      <div class="hang" *ngIf="isDungDiaChiKhac">
        <span class="p-float-label">
          <input id="float-input" type="text" pInputText [(ngModel)]="customDiaChi">
          <label for="float-input" class="labelFocus">Địa chỉ</label>
        </span>
      </div>
      <div class="hang" *ngIf="!isDungDiaChiKhac">
          <label for="{{item.id}}" class=""  style="width: 100%;" *ngFor="let item of diachi; let index in diachi">
            <div class="ma_item" style="display: flex;">
              <div style="width: 8%; display: flex; align-items: center; justify-content: center;  padding-right: 5px;">
                <p-radioButton name="pizza" value=" Xã {{item.xa}}, Quận/Huyện {{item.huyen}}, Tỉnh/Thành phố {{item.tinh}}" [(ngModel)]="selectedValuedc" inputId="{{item.id}}"></p-radioButton>
              </div>

                <div>
                  <span>{{item.ghiChu}}, Xã {{item.xa}}, Quận/Huyện {{item.huyen}}, Tỉnh/Thành phố {{item.tinh}}</span>
                </div>
            </div>
          </label>
          <!-- <div class="item__diachi" *ngFor="let item of diachi">
            <div>
              <span>{{item.ghiChu}}, Xã {{item.xa}}, Quận/Huyện {{item.huyen}}, Tỉnh/Thành phố {{item.tinh}}</span>
            </div>
          </div> -->
      </div>
      <div *ngIf="rqDC" style="color: red; background-color: rgb(244, 225, 228);padding: 10px 20px;margin-top: 20px; border-radius: 10px; font-weight: 600; text-align: right;">{{rqDC}}</div>

      <div style="padding: 10px 0;">
        <h5>Phương thức vận chuyển</h5>
      </div>

      <div style="margin-left: 40px;">


        <label for="ingredient1" class=""  style="width: 100%;">
          <div class="ma_item" style="display: flex;">
            <div style="width: 8%; display: flex; align-items: center; justify-content: center;  padding-right: 5px;">
              <p-radioButton name="pizza" value="Vận chuyển thường" [(ngModel)]="phuongThucVanChuyen" inputId="ingredient1" (ngModelChange)="thayDoiTong()"></p-radioButton>
            </div>

              <div style="width: 92%;">
                <div>Vận chuyển thường: dự kiến 3-5 ngày</div>
                <div>Phí vận chuyển: 25,000đ</div>
              </div>
          </div>
        </label>


        <label for="ingredient2" class=""  style="width: 100%;">
          <div class="ma_item" style="display: flex;">
            <div style="width: 8%; display: flex; align-items: center; justify-content: center; padding-right: 5px;">
                <p-radioButton name="pizza" value="Vận chuyển siêu tốc" [(ngModel)]="phuongThucVanChuyen" inputId="ingredient2" (ngModelChange)="thayDoiTong()"></p-radioButton>
            </div>

            <div style="width: 92%;">
                <div>Vận chuyển siêu tốc: nhận hàng trong ngày hoặc ngày hôm sau</div>
                <div>Phí vận chuyển: 40,000đ</div>
            </div>
          </div>
          </label>

      </div>
      <div *ngIf="rqPTVC" style="color: red; background-color: rgb(244, 225, 228);padding: 10px 20px;margin-top: 20px; border-radius: 10px; font-weight: 600; text-align: right;">{{rqPTVC}}</div>



      <div style="padding: 10px 0;">
        <h5>Phương thức thanh toán</h5>
      </div>
      <div style="margin-left: 40px;">


        <label for="tt1" class=""  style="width: 100%;">
          <div class="ma_item" style="display: flex;">
            <div style="width: 8%; display: flex; align-items: center; justify-content: center;  padding-right: 5px;">
              <p-radioButton name="pizza" value="Thanh toán khi giao hàng (COD)" [(ngModel)]="phuongThucThanhToan" inputId="tt1"></p-radioButton>
            </div>

              <div style="width: 92%; display: flex;">
                <img class="main-img" src="https://hstatic.net/0/0/global/design/seller/image/payment/cod.svg?v=6">
                <div style="display: flex; align-items: center; margin-left: 10px;">Thanh toán khi giao hàng (COD)</div>
              </div>
          </div>
        </label>
        <label for="tt2" class=""  style="width: 100%;">
          <div class="ma_item" style="display: flex;">
            <div style="width: 8%; display: flex; align-items: center; justify-content: center;  padding-right: 5px;">
              <p-radioButton name="pizza" value="Thanh toán bằng mã QR" [(ngModel)]="phuongThucThanhToan" inputId="tt2"></p-radioButton>
            </div>

              <div style="width: 92%; display: flex;">
                <img class="main-img" src="https://static.vecteezy.com/system/resources/previews/012/284/013/original/qr-code-icon-special-identity-illustration-as-simple-sign-and-trendy-symbol-for-design-websites-presentation-or-apps-elements-vector.jpg">
                <div style="display: flex; align-items: center; margin-left: 10px;">Thanh toán bằng mã QR</div>
              </div>
          </div>
        </label>
        <!-- <label for="tt3" class=""  style="width: 100%;">
          <div class="ma_item" style="display: flex;">
            <div style="width: 8%; display: flex; align-items: center; justify-content: center;  padding-right: 5px;">
              <p-radioButton name="pizza" value="Thẻ ATM/Visa/Master/JCB/Amex qua cổng Payoo" [(ngModel)]="phuongThucThanhToan" inputId="tt3"></p-radioButton>
            </div>

              <div style="width: 92%; display: flex;">
                <div style="display: flex; align-items: center;">
                  <img class="main-img" src="https://hstatic.net/0/0/global/design/seller/image/payment/payoo.svg?v=6">
                </div>

                <div style=" margin-left: 10px;">
                  <div style="display: flex; align-items: center;">Thẻ ATM/Visa/Master/JCB/Amex qua cổng Payoo</div>
                <img class="child-img" src="https://hstatic.net/0/0/global/design/seller/image/payment/atm_visa_master_jcb.svg?v=6" style="width: unset; height: 30px;">
                </div>

              </div>
          </div>
        </label> -->
      </div>
      <div *ngIf="rqPTTT" style="color: red; background-color: rgb(244, 225, 228);padding: 10px 20px;margin-top: 20px; border-radius: 10px; font-weight: 600; text-align: right;">{{rqPTTT}}</div>
    </div>


    <div class="giam__container" style="width: 40%; padding: 10px 20px;">
      <div class="giam">
        <div class="item" style="display: flex;" *ngFor="let item of listSanPham">
          <div class="item__img" style="width: 20%; display: flex; align-items: center; justify-content: center;">
            <img style="width: 70px; height: 80px;" [src]="item.duongDanAnh">
          </div>
          <div class="item__info" style="width: 60%; display: flex; align-items: center; margin-left: 10px;">
            <div>
              <div>{{item.ten}}</div>
              <div><div class="item__mau" style="display: flex;">Màu:
                <span *ngIf="item.mau == 1"><div style="background-color: red;"></div></span>
                <span *ngIf="item.mau == 2"><div style="background-color: orange;"></div></span>
                <span *ngIf="item.mau == 3"><div style="background-color: yellow"></div></span>
                <span *ngIf="item.mau == 4"><div style="background-color: rgb(22, 126, 6);"></div></span>
                <span *ngIf="item.mau == 5"><div style="background-color: rgb(14, 5, 110);"></div></span>
                <span *ngIf="item.mau == 6"><div style="background-color: rgb(51, 5, 106);"></div></span>
                <span *ngIf="item.mau == 8"><div style="background-color: rgb(255, 255, 255);"></div></span>
                <span *ngIf="item.mau == 7"><div style="background-color: rgb(0, 0, 0);"></div></span>
              </div></div>
              <div><a style="font-size: 14px;">Size: {{item.kichCo}}</a></div>
            </div>
          </div>
          <div class="item__gia" style="width: 20%; display: flex; align-items: center;">
            <p style="margin: 0;" *ngIf="!item.giaSauGiam">{{item.gia * item.soLuong| formatVnd}}</p>
            <p style="margin: 0;" *ngIf="item.giaSauGiam">{{item.giaSauGiam * item.soLuong | formatVnd}}</p>
          </div>
        </div>
      </div>
      <div class="magiam">
        <h5>Phiếu giảm giá của bạn</h5>
        <div class="list_ma" style="max-height: 200px; " *ngIf="magiamgia">
          <div class="ma_item" style="display: flex; padding: 0;" *ngFor="let item of magiamgia" >
            <div style="display: flex; justify-content: space-between; width: 100%; padding: 10px;" *ngIf="item.ma != maGiam">
              <div style="width: 70%;" >
                <div>Mã giảm: {{item.ma}}</div>
                <div>Lượng giảm: {{item.luongGiam}}%</div>
              </div>
              <div style="width: 30%; display: flex; align-items: center; justify-content: right;">
                <button pButton type="button" class="p-button-raised p-button-rounded p-button-information" style="border-radius: 25px; padding: 5px 12px;justify-content: center; font-size: 14px; " (click)="dungMaGiam(item.id, item.ma, item.luongGiam)">Sử dụng</button>
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; width: 100%; background-color: rgb(199, 237, 237); padding: 10px;" *ngIf="item.ma == maGiam">
              <div style="width: 70%;" >
                <div>Mã giảm: {{item.ma}}</div>
                <div>Lượng giảm: {{item.luongGiam}}%</div>
              </div>
              <div style="width: 30%; display: flex; align-items: center; justify-content: right;">
                <button pButton type="button" class="p-button-raised p-button-rounded p-button-information" style="border-radius: 25px; padding: 5px 12px;justify-content: center; font-size: 14px; " (click)="dungMaGiam(item.id, item.ma, item.luongGiam)">Sử dụng</button>
              </div>
            </div>
          </div>
        </div>
        <div class="list_ma" style="max-height: 200px; " *ngIf="magiamgia.length == 0">
          <img src="https://cdn-icons-png.flaticon.com/512/11329/11329060.png" style="width: 100%; height: 199px; object-fit: contain;">

        </div>
      </div>
      <div style="padding: 20px 0; border-bottom: solid 1px lightgray;">
        <div class="tong_dong">
          <h6 style="color: gray;">Tạm tính</h6>
          <p style="margin:0;color: gray; ">{{tongTien}}</p>
        </div>
        <div class="tong_dong" *ngIf="maGiam">
          <h6 style="color: gray;">Giảm giá theo mã: {{maGiam}}</h6>
          <p style="margin:0;color: gray; ">Lượng giảm: {{luongGiam}}%</p>
        </div>
        <div class="tong_dong">
          <h6 style="color: gray;">Phí vận chuyển</h6>
          <p style="margin:0;color: gray; " *ngIf="phuongThucVanChuyen == 'Vận chuyển thường'">{{25000 | formatVnd}}</p>
          <p style="margin:0;color: gray; " *ngIf="phuongThucVanChuyen == 'Vận chuyển siêu tốc'">{{40000 | formatVnd}}</p>
        </div>
      </div>
      <div style="padding: 20px 0;">
        <div class="tong_dong">
          <h6 style="color: gray;">Tổng cộng</h6>
          <p style="margin:0;color: rgb(19, 4, 75); font-size: 20px; ">
            <span style="font-size: 14px; color: lightgray;">VND</span>
            {{thanhToan | formatVnd}}
          </p>
        </div>
      </div>
      <div style="margin-top: 20px;">
        <button pButton type="button" class="p-button-raised p-button-rounded p-button-information" style="border-radius: 25px; padding: 12px 15px; width: 100%;justify-content: center; font-size: 20px; " (click)="hoanTatDonHang()">Hoàn tất đơn hàng</button>
      </div>
    </div>
  </div>
  <p-confirmDialog header="Đặt hàng" icon="fas fa-triangle-exclamation"></p-confirmDialog>
  <p-dialog header="" [(visible)]="display" [style]="{width: '400px'}" [closable]="false" [draggable]="false" [modal]="true">
    <div style="text-align: center; margin-bottom: 25px;">
        <img src="https://cdn-icons-png.freepik.com/512/6815/6815090.png" style="width: 100px; height: 100px; object-fit: cover;">
    </div>
    <div style="text-align: center; font-size: 24px;">Đặt hàng thành công</div>
  </p-dialog>

  <p-dialog header="Thông tin chuyển khoản" [(visible)]="showQR" [style]="{width: '500px'}" [draggable]="false" [modal]="true">
    <div style="text-align: center;">
        <img [src]="imgQR" style="width: 400px; height: auto; object-fit: cover;">
    </div>
    <div>
      <p style="text-align: right;">{{ minutes }}:{{ seconds < 10 ? '0' : '' }}{{ seconds }}</p>
    </div>
    <p-progressBar mode="indeterminate"></p-progressBar>
  </p-dialog>
  </div>
  </div>


